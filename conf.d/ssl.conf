<IfModule mod_ssl.c> 

<VirtualHost *:8443>
        ServerAdmin webmaster@localhost
        ServerName robotics.int-rt.corp.doosan.com
 
        SSLEngine On

        #ReverseProxy를 사용하기 위함.
        ProxyRequests Off

        DocumentRoot /opt/app-root/src
 
		#ErrorLog |/usr/bin/cat
		#TransferLog |/usr/bin/cat
		#LogLevel warn
 
        SSLCertificateFile /opt/app-root/src/certs/robotics.int-rt.corp.doosan.com.cert.pem
        SSLCertificateKeyFile /opt/app-root/src/certs/robotics.int-rt.corp.doosan.com.key.pem
 
        #루트CA의 인증서 경로
        SSLCACertificatePath /opt/app-root/src/certs/
        SSLCACertificateFile /opt/app-root/src/certs/root-ca.cert.pem
  
        #CRL경로 
        SSLCARevocationPath /opt/app-root/src/certs/
        SSLCARevocationFile /opt/app-root/src/certs/intermed-ca.crl
  
        #사용자 인증서 점검
        SSLVerifyClient require
        SSLVerifyDepth 2
  
        #인증서 폐기 목록 검증하는 부분
        SSLCARevocationCheck leaf
 
        #인증서 검증에 실패하였을 경우, 프록시 접근 Deny
        <Proxy *>
            Order deny,allow
            Allow from all
        </Proxy>
 
        SSLOptions +StdEnvVars
        <FilesMatch "\.(cgi|shtml|phtml|php)$">
                SSLOptions +StdEnvVars
        </FilesMatch>
        <Directory /usr/lib/cgi-bin>
                SSLOptions +StdEnvVars
        </Directory>
         BrowserMatch "MSIE [2-6]" \
                nokeepalive ssl-unclean-shutdown \
                downgrade-1.0 force-response-1.0
</VirtualHost>
 
</IfModule>
  